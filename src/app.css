@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

/* Custom Font for Text Tool */
@font-face {
  font-family: 'ReenieBeanie';
  src: url('/fonts/ReenieBeenie.woff2') format('woff2'),
       url('/fonts/ReenieBeanie.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
    font-size: 16px;
    zoom: 1;
  }
  
  body {
    @apply bg-cream dark:bg-gray-900 text-charcoal dark:text-gray-100 overflow-hidden;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Set checkbox accent color to brand sage green */
  input[type="checkbox"] {
    accent-color: #87A96B; /* sage green */
  }
}

/* Custom drawing canvas styles */
@layer components {
  .drawing-canvas {
    cursor: crosshair;
    touch-action: none; /* Prevent scrolling while drawing */
  }
  
  .drawing-canvas.eraser {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="none" stroke="pink" stroke-width="2"/></svg>') 10 10, auto;
  }
  
  .tool-button {
    @apply p-2 rounded-lg transition-all duration-200 ease-out;
    @apply hover:scale-105 hover:shadow-lg active:scale-95;
    @apply focus:outline-none focus:ring-2 focus:ring-sage/50;
  }
  
  .tool-button.active {
    @apply bg-sage text-white shadow-md;
  }
  
  .tool-button:not(.active) {
    @apply bg-white/70 dark:bg-gray-800/70 text-charcoal dark:text-gray-200 hover:bg-white/90 dark:hover:bg-gray-700/90;
  }
  
  .pdf-viewer {
    @apply bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl;
    @apply border border-white/30 dark:border-gray-700/30;
  }
  
  .floating-panel {
    @apply bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl shadow-xl;
    @apply border border-white/30 dark:border-gray-700/30 p-4;
  }
  
  .smooth-button {
    @apply px-4 py-2 rounded-xl font-medium transition-all duration-200;
    @apply focus:outline-none;
  }
  
  .primary-button {
    @apply smooth-button bg-sage hover:bg-sage/90;
    @apply shadow-lg hover:shadow-xl;
    color: #121212;
  }
  
  .secondary-button {
    @apply smooth-button bg-white/70 dark:bg-gray-800/70 text-charcoal dark:text-gray-200 hover:bg-white/90 dark:hover:bg-gray-700/90;
    @apply border border-charcoal/10 dark:border-gray-600/20;
    @apply hover:scale-[1.02] active:scale-[0.98];
  }
}

/* Responsive toolbar improvements */
@layer utilities {
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .glass-effect {
    @apply bg-white/30 dark:bg-gray-800/30 backdrop-blur-md border border-white/20 dark:border-gray-700/20;
  }
  
  /* Mobile-first responsive design */
  @media (max-width: 1023px) {
    .toolbar-top .floating-panel {
      @apply !py-1 !px-2;
    }
    
    .toolbar-bottom .floating-panel {
      @apply !py-2 !px-2;
    }
    
    .toolbar-bottom .tool-button {
      @apply p-1.5;
    }
    
    /* Enhanced horizontal scrolling for mobile toolbar */
    .toolbar-bottom .floating-panel {
      @apply overflow-x-auto overflow-y-hidden;
      scrollbar-width: thin;
      scrollbar-color: rgba(139, 148, 116, 0.5) transparent;
    }
    
    .toolbar-bottom .floating-panel::-webkit-scrollbar {
      height: 4px;
    }
    
    .toolbar-bottom .floating-panel::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .toolbar-bottom .floating-panel::-webkit-scrollbar-thumb {
      background: rgba(139, 148, 116, 0.5);
      border-radius: 2px;
    }
    
    .toolbar-bottom .floating-panel::-webkit-scrollbar-thumb:hover {
      background: rgba(139, 148, 116, 0.7);
    }
    
    /* Ensure dropdowns don't get cut off on mobile */
    .toolbar-bottom .floating-panel {
      @apply max-h-[80vh];
    }
    
    /* Smooth scrolling for better UX */
    .toolbar-bottom .floating-panel {
      scroll-behavior: smooth;
    }
    
    /* Smooth fade indicators */
    .toolbar-bottom .floating-panel > div[class*="bg-gradient"] {
      transition: opacity 0.3s ease;
    }
  }
  
  /* Ensure all dropdowns are properly positioned and don't affect toolbar layout */
  .stamp-palette-container,
  .color-palette-container,
  .line-width-container,
  .eraser-size-container {
    @apply relative;
  }
  
  /* Dropdown positioning for both toolbars */
  .stamp-palette-container .absolute,
  .color-palette-container .absolute,
  .line-width-container .absolute,
  .eraser-size-container .absolute {
    @apply z-50;
  }
  
  @media (max-width: 767px) {
    .toolbar-top {
      @apply left-2 right-2;
    }
    
    .toolbar-bottom {
      @apply left-2 right-2 bottom-2;
    }
    
    .toolbar-top .floating-panel {
      @apply !py-1 !px-2;
    }
    
    .toolbar-bottom .floating-panel {
      @apply !py-1.5 !px-2;
    }
    
    /* Ensure minimum touch target size on mobile */
    .toolbar-bottom .tool-button {
      @apply min-w-[44px] min-h-[44px];
    }
  }
  
  @media (max-width: 639px) {
    .toolbar-top .floating-panel {
      @apply !py-1 !px-1;
    }
    
    .toolbar-bottom .floating-panel {
      @apply !py-1 !px-1;
    }
    
    .toolbar-bottom .tool-button {
      @apply p-1;
    }
    
    /* Compact spacing for very small screens */
    .toolbar-bottom .space-x-2 > * + * {
      @apply ml-1;
    }
  }
}
